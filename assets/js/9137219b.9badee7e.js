"use strict";(self.webpackChunkOpenRefine_Documentation=self.webpackChunkOpenRefine_Documentation||[]).push([[7410],{3905:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>h});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var p=r.createContext({}),u=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},s=function(e){var n=u(e.components);return r.createElement(p.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=u(t),h=o,f=d["".concat(p,".").concat(h)]||d[h]||c[h]||a;return t?r.createElement(f,i(i({ref:n},s),{},{components:t})):r.createElement(f,i({ref:n},s))}));function h(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=d;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var u=2;u<a;u++)i[u]=t[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},3943:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>p,default:()=>h,frontMatter:()=>l,metadata:()=>u,toc:()=>c});var r=t(7462),o=t(3366),a=(t(7294),t(3905)),i=["components"],l={id:"jythonclojure",title:"Jython & Clojure",sidebar_label:"Jython & Clojure"},p=void 0,u={unversionedId:"manual/jythonclojure",id:"version-3.6/manual/jythonclojure",title:"Jython & Clojure",description:"Jython",source:"@site/versioned_docs/version-3.6/manual/jythonclojure.md",sourceDirName:"manual",slug:"/manual/jythonclojure",permalink:"/new-openrefine-website/docs/manual/jythonclojure",draft:!1,editUrl:"https://github.com/OpenRefine/OpenRefine/edit/master/docs/versioned_docs/version-3.6/manual/jythonclojure.md",tags:[],version:"3.6",lastUpdatedBy:"Antonin Delpeuch",lastUpdatedAt:1662887291,formattedLastUpdatedAt:"Sep 11, 2022",frontMatter:{id:"jythonclojure",title:"Jython & Clojure",sidebar_label:"Jython & Clojure"},sidebar:"version-3.6/docs",previous:{title:"GREL functions",permalink:"/new-openrefine-website/docs/manual/grelfunctions"},next:{title:"Exporting",permalink:"/new-openrefine-website/docs/manual/exporting"}},s={},c=[{value:"Jython",id:"jython",level:2},{value:"Syntax",id:"syntax",level:3},{value:"Tutorials",id:"tutorials",level:3},{value:"Clojure",id:"clojure",level:2}],d={toc:c};function h(e){var n=e.components,t=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"jython"},"Jython"),(0,a.kt)("p",null,"Jython 2.7.2 comes bundled with the default installation of OpenRefine 3.4.1. You can add libraries and code by following ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/OpenRefine/OpenRefine/wiki/Extending-Jython-with-pypi-modules"},"this tutorial"),". A large number of Python files (",(0,a.kt)("inlineCode",{parentName:"p"},".py")," or ",(0,a.kt)("inlineCode",{parentName:"p"},".pyc"),") are compatible. "),(0,a.kt)("p",null,"Python code that depends on C bindings will not work in OpenRefine, which uses Java / Jython only. Since Jython is essentially Java, you can also import Java libraries and utilize those. "),(0,a.kt)("p",null,"You will need to restart OpenRefine, so that new Jython or Python libraries are initialized during startup."),(0,a.kt)("p",null,"OpenRefine now has ",(0,a.kt)("a",{parentName:"p",href:"grelfunctions#jsoup-xml-and-html-parsing-functions"},"most of the Jsoup.org library built into GREL functions")," for parsing and working with HTML and XML elements."),(0,a.kt)("h3",{id:"syntax"},"Syntax"),(0,a.kt)("p",null,"Expressions in Jython must have a ",(0,a.kt)("inlineCode",{parentName:"p"},"return")," statement:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"  return value[1:-1]\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"  return rowIndex%2\n")),(0,a.kt)("p",null,"Fields have to be accessed using the bracket operator rather than dot notation:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'  return cells["col1"]["value"]\n')),(0,a.kt)("p",null,"For example, to access the ",(0,a.kt)("a",{parentName:"p",href:"reconciling#reconciliation-facets"},"edit distance")," between a reconciled value and an original cell value using ",(0,a.kt)("a",{parentName:"p",href:"#reconciliation"},"recon variables"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'  return cell["recon"]["features"]["nameLevenshtein"]\n')),(0,a.kt)("p",null,"To return the lower case of ",(0,a.kt)("inlineCode",{parentName:"p"},"value")," (if the value is not null):"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"  if value is not None:\n    return value.lower()\n  else:\n    return None\n")),(0,a.kt)("h3",{id:"tutorials"},"Tutorials"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/OpenRefine/OpenRefine/wiki/Extending-Jython-with-pypi-modules"},"Extending Jython with pypi modules")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/OpenRefine/OpenRefine/wiki/Jython#tutorial---working-with-phone-numbers-using-java-libraries-inside-python"},"Working with phone numbers using Java libraries inside Python"))),(0,a.kt)("p",null,"Full documentation on the Jython language can be found on its official site: ",(0,a.kt)("a",{parentName:"p",href:"http://www.jython.org"},"http://www.jython.org"),"."),(0,a.kt)("h2",{id:"clojure"},"Clojure"),(0,a.kt)("p",null,"Clojure 1.10.1 comes bundled with the default installation of OpenRefine 3.4.1. At this time, not all ",(0,a.kt)("a",{parentName:"p",href:"expressions#variables"},"variables")," can be used with Clojure expressions: only ",(0,a.kt)("inlineCode",{parentName:"p"},"value"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"row"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"rowIndex"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"cell"),", and ",(0,a.kt)("inlineCode",{parentName:"p"},"cells")," are available."),(0,a.kt)("p",null,"For example, functions can take the form "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"(.. value (toUpperCase) )\n")),(0,a.kt)("p",null,"Or can look like "),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'(-> value (str/split #" ") last )\n')),(0,a.kt)("p",null,"which functions like ",(0,a.kt)("inlineCode",{parentName:"p"},'value.split(" ")')," in GREL."),(0,a.kt)("p",null,"For help with syntax, see the ",(0,a.kt)("a",{parentName:"p",href:"https://clojure.org/guides/learn/syntax"},"Clojure website's guide to syntax"),"."),(0,a.kt)("p",null,"User-contributed Clojure recipes can be found on our wiki at ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/OpenRefine/OpenRefine/wiki/Recipes#11-clojure"},"https://github.com/OpenRefine/OpenRefine/wiki/Recipes#11-clojure"),"."),(0,a.kt)("p",null,"Full documentation on the Clojure language can be found on its official site: ",(0,a.kt)("a",{parentName:"p",href:"https://clojure.org/"},"https://clojure.org/"),"."))}h.isMDXComponent=!0}}]);