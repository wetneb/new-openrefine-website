<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-3.5 plugin-docs plugin-id-default docs-doc-id-manual/grel">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">General Refine Expression Language | OpenRefine</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wetneb.github.io/new-openrefine-website/docs/3.5/manual/grel"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="3.5"><meta data-rh="true" name="docusaurus_tag" content="docs-default-3.5"><meta data-rh="true" name="docsearch:version" content="3.5"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-3.5"><meta data-rh="true" property="og:title" content="General Refine Expression Language | OpenRefine"><meta data-rh="true" name="description" content="Basics"><meta data-rh="true" property="og:description" content="Basics"><link data-rh="true" rel="icon" href="/new-openrefine-website/img/openrefine_logo.png"><link data-rh="true" rel="canonical" href="https://wetneb.github.io/new-openrefine-website/docs/3.5/manual/grel"><link data-rh="true" rel="alternate" href="https://wetneb.github.io/new-openrefine-website/docs/3.5/manual/grel" hreflang="en"><link data-rh="true" rel="alternate" href="https://wetneb.github.io/new-openrefine-website/docs/3.5/manual/grel" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://2ROSQW3VSY-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/new-openrefine-website/blog/rss.xml" title="OpenRefine RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/new-openrefine-website/blog/atom.xml" title="OpenRefine Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="OpenRefine" href="/new-openrefine-website/opensearch.xml">
<script src="/js/fix-location.js"></script><link rel="stylesheet" href="/new-openrefine-website/assets/css/styles.0a2f6dd5.css">
<link rel="preload" href="/new-openrefine-website/assets/js/runtime~main.d5881a30.js" as="script">
<link rel="preload" href="/new-openrefine-website/assets/js/main.bd23b518.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/new-openrefine-website/"><div class="navbar__logo"><img src="/new-openrefine-website/img/openrefine_logo.png" alt="OpenRefine diamond logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/new-openrefine-website/img/openrefine_logo.png" alt="OpenRefine diamond logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">OpenRefine</b></a><a class="navbar__item navbar__link" href="/new-openrefine-website/download">Download</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/new-openrefine-website/docs">Documentation</a><a class="navbar__item navbar__link" href="/new-openrefine-website/community">Community</a><a class="navbar__item navbar__link" href="/new-openrefine-website/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/new-openrefine-website/donate">Donate</a><a href="https://github.com/OpenRefine/OpenRefine/edit/master/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/new-openrefine-website/docs/3.5/">User Manual</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/new-openrefine-website/docs/3.5/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/installing">Installing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/running">Running</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/starting">Starting a project</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/exploring">Exploring data</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/transforming">Transforming data</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/reconciling">Reconciling</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/wikibase/overview">Wikibase</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/expressions">Expressions</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/expressions">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/grel">General Refine Expression Language</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/grelfunctions">GREL functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/jythonclojure">Jython &amp; Clojure</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/exporting">Exporting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/new-openrefine-website/docs/3.5/manual/troubleshooting">Troubleshooting</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/new-openrefine-website/docs/3.5/manual/grelfunctions">GREL Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/new-openrefine-website/docs/3.5/technical-reference/technical-reference-index">Technical Reference</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->OpenRefine<!-- --> <b>3.5</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/new-openrefine-website/docs/manual/grel">latest version</a></b> (<!-- -->3.6<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/new-openrefine-website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">User Manual</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Expressions</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">General Refine Expression Language</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 3.5</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>General Refine Expression Language</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="basics">Basics<a class="hash-link" href="#basics" title="Direct link to heading">​</a></h2><p>GREL (General Refine Expression Language) is designed to resemble Javascript. Formulas use variables and depend on data types to do things like string manipulation or mathematical calculations:</p><table><thead><tr><th>Example</th><th>Output</th></tr></thead><tbody><tr><td><code>value + &quot; (approved)&quot;</code></td><td>Concatenate two strings; whatever is in the cell gets converted to a string first</td></tr><tr><td><code>value + 2.239</code></td><td>Add 2.239 to the existing value (if a number); append text &quot;2.239&quot; to the end of the string otherwise</td></tr><tr><td><code>value.trim().length()</code> <!-- --> <!-- --> <!-- --> </td><td>Trim leading and trailing whitespace of the cell value and then output the length of the result</td></tr><tr><td><code>value.substring(7, 10)</code></td><td>Output the substring of the value from character index 7, 8, and 9 (excluding character index 10)</td></tr><tr><td><code>value.substring(13)</code></td><td>Output the substring from index 13 to the end of the string</td></tr></tbody></table><p>Note that the operator for string concatenation is <code>+</code> (not “&amp;” as is used in Excel). </p><p>Evaluating conditions uses symbols such as &lt;, &gt;, *, /, etc. To check whether two objects are equal, use two equal signs (<code>value==&quot;true&quot;</code>).</p><p>See the <a href="/new-openrefine-website/docs/3.5/manual/grelfunctions">GREL functions page for a thorough reference</a> on each function and its inputs and outputs. Read on below for more about the general nature of GREL expressions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="syntax">Syntax<a class="hash-link" href="#syntax" title="Direct link to heading">​</a></h2><p>In GREL, functions can use either of these two forms:</p><ul><li>functionName(arg0, arg1, ...)</li><li>arg0.functionName(arg1, ...)</li></ul><p>The second form is a shorthand to make expressions easier to read. It simply pulls the first argument out and appends it to the front of the function, with a dot:</p><table><thead><tr><th>Dot notation</th><th>Full notation</th></tr></thead><tbody><tr><td><code>value.trim().length()</code></td><td><code>length(trim(value))</code></td></tr><tr><td><code>value.substring(7, 10)</code></td><td><code>substring(value, 7, 10)</code></td></tr></tbody></table><p>So, in the dot shorthand, the functions occur from left to right in the order of calling, rather than in the reverse order with parentheses. This allows you to string together multiple functions in a readable order.</p><p>The dot notation can also be used to access the member fields of <a href="/new-openrefine-website/docs/3.5/manual/expressions#variables">variables</a>. For referring to column names that contain spaces (anything not a continuous string), use square brackets instead of dot notation:</p><table><thead><tr><th>Example</th><th>Description</th></tr></thead><tbody><tr><td><code>FirstName.cells</code></td><td>Access the cell in the column named “FirstName” of the current row</td></tr><tr><td><code>cells[&quot;First Name&quot;]</code></td><td>Access the cell in the column called “First Name” of the current row</td></tr></tbody></table><p>Square brackets can also be used to get substrings and sub-arrays, and single items from arrays:</p><table><thead><tr><th>Example</th><th>Description</th></tr></thead><tbody><tr><td><code>value[1,3]</code></td><td>A substring of value, starting from character 1 up to but excluding character 3</td></tr><tr><td><code>&quot;internationalization&quot;[1,-2]</code></td><td>Will return “nternationalizati” (negative indexes are counted from the end)</td></tr><tr><td><code>row.columnNames[5]</code></td><td>Will return the name of the fifth column</td></tr></tbody></table><p>Any function that outputs an array can use square brackets to select only one part of the array to output as a string (remember that the index of the items in an array starts with 0). </p><p>For example, <a href="/new-openrefine-website/docs/3.5/manual/grelfunctions#partitions-s-or-p-fragment-b-omitfragment-optional">partition()</a> would normally output an array of three items: the part before your chosen fragment, the fragment you&#x27;ve identified, and the part after. Selecting only the third part with <code>&quot;internationalization&quot;.partition(&quot;nation&quot;)[2]</code> will output “alization” (and so will <!-- -->[-1]<!-- -->, indicating the final item in the array).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="controls">Controls<a class="hash-link" href="#controls" title="Direct link to heading">​</a></h2><p>GREL offers controls to support branching and looping (that is, “if” and “for” functions), but unlike functions, their arguments don&#x27;t all get evaluated before they get run. A control can decide which part of the code to execute and can affect the environment bindings. Functions, on the other hand, can&#x27;t do either. Each control decides which of their arguments to evaluate to <code>value</code>, and how.</p><p>Please note that the GREL control names are case-sensitive: for example, the isError() control can&#x27;t be called with iserror().</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="ife-etrue-efalse">if(e, eTrue, eFalse)<a class="hash-link" href="#ife-etrue-efalse" title="Direct link to heading">​</a></h4><p>Expression e is evaluated to a value. If that value is true, then expression eTrue is evaluated and the result is the value of the whole if() expression. Otherwise, expression eFalse is evaluated and that result is the value.</p><p>Examples:</p><table><thead><tr><th>Example expression</th><th>Result</th></tr></thead><tbody><tr><td><code>if(&quot;internationalization&quot;.length() &gt; 10, &quot;big string&quot;, &quot;small string&quot;)</code></td><td>“big string”</td></tr><tr><td><code>if(mod(37, 2) == 0, &quot;even&quot;, &quot;odd&quot;)</code></td><td>“odd”</td></tr></tbody></table><p>Nested if (switch case) example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">if(value == &#x27;Place&#x27;, &#x27;http://www.example.com/Location&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if(value == &#x27;Person&#x27;, &#x27;http://www.example.com/Agent&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if(value == &#x27;Book&#x27;, &#x27;http://www.example.com/Publication&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">null)))</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="withe1-variable-v-e2">with(e1, variable v, e2)<a class="hash-link" href="#withe1-variable-v-e2" title="Direct link to heading">​</a></h4><p>Evaluates expression e1 and binds its value to variable v. Then evaluates expression e2 and returns that result.</p><table><thead><tr><th>Example expression</th><th>Result</th></tr></thead><tbody><tr><td><code>with(&quot;european union&quot;.split(&quot; &quot;), a, a.length())</code></td><td>2</td></tr><tr><td><code>with(&quot;european union&quot;.split(&quot; &quot;), a, forEach(a, v, v.length()))</code></td><td>[ 8, 5 ]</td></tr><tr><td><code>with(&quot;european union&quot;.split(&quot; &quot;), a, forEach(a, v, v.length()).sum() / a.length())</code></td><td>6.5</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="filtere1-v-e-test">filter(e1, v, e test)<a class="hash-link" href="#filtere1-v-e-test" title="Direct link to heading">​</a></h4><p>Evaluates expression e1 to an array. Then for each array element, binds its value to variable v, evaluates expression test - which should return a boolean. If the boolean is true, pushes v onto the result array.</p><table><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td><code>filter([ 3, 4, 8, 7, 9 ], v, mod(v, 2) == 1)</code></td><td>[ 3, 7, 9 ]</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="foreache1-v-e2">forEach(e1, v, e2)<a class="hash-link" href="#foreache1-v-e2" title="Direct link to heading">​</a></h4><p>Evaluates expression e1 to an array. Then for each array element, binds its value to variable v, evaluates expression e2, and pushes the result onto the result array. When e1 is a JSON object, <code>forEach</code> iterates over its keys.</p><table><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td><code>forEach([ 3, 4, 8, 7, 9 ], v, mod(v, 2))</code></td><td>[ 1, 0, 0, 1, 1 ]</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="foreachindexe1-i-v-e2">forEachIndex(e1, i, v, e2)<a class="hash-link" href="#foreachindexe1-i-v-e2" title="Direct link to heading">​</a></h4><p>Evaluates expression e1 to an array. Then for each array element, binds its index to variable i and its value to variable v, evaluates expression e2, and pushes the result onto the result array.</p><table><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td><code>forEachIndex([ &quot;anne&quot;, &quot;ben&quot;, &quot;cindy&quot; ], i, v, (i + 1) + &quot;. &quot; + v).join(&quot;, &quot;)</code></td><td>1. anne, 2. ben, 3. cindy</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="forrangen-from-n-to-n-step-v-e">forRange(n from, n to, n step, v, e)<a class="hash-link" href="#forrangen-from-n-to-n-step-v-e" title="Direct link to heading">​</a></h4><p>Iterates over the variable v starting at from, incrementing by the value of step each time while less than to. At each iteration, evaluates expression e, and pushes the result onto the result array.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="fornonblanke-v-enonblank-eblank">forNonBlank(e, v, eNonBlank, eBlank)<a class="hash-link" href="#fornonblanke-v-enonblank-eblank" title="Direct link to heading">​</a></h4><p>Evaluates expression e. If it is non-blank, forNonBlank() binds its value to variable v, evaluates expression eNonBlank and returns the result. Otherwise (if e evaluates to blank), forNonBlank() evaluates expression eBlank and returns that result instead.</p><p>Unlike other GREL functions beginning with “for,” forNonBlank() is not iterative. forNonBlank() essentially offers a shorter syntax to achieving the same outcome by using the isNonBlank() function within an “if” statement.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="isblanke-isnonblanke-isnulle-isnotnulle-isnumerice-iserrore">isBlank(e), isNonBlank(e), isNull(e), isNotNull(e), isNumeric(e), isError(e)<a class="hash-link" href="#isblanke-isnonblanke-isnulle-isnotnulle-isnumerice-iserrore" title="Direct link to heading">​</a></h4><p>Evaluates the expression e, and returns a boolean based on the named evaluation.</p><p>Examples:</p><table><thead><tr><th>Expression</th><th>Result</th></tr></thead><tbody><tr><td><code>isBlank(&quot;abc&quot;)</code></td><td>false</td></tr><tr><td><code>isNonBlank(&quot;abc&quot;)</code></td><td>true</td></tr><tr><td><code>isNull(&quot;abc&quot;)</code></td><td>false</td></tr><tr><td><code>isNotNull(&quot;abc&quot;)</code></td><td>true</td></tr><tr><td><code>isNumeric(2)</code></td><td>true</td></tr><tr><td><code>isError(1)</code></td><td>false</td></tr><tr><td><code>isError(&quot;abc&quot;)</code></td><td>false</td></tr><tr><td><code>isError(1 / 0)</code></td><td>true</td></tr></tbody></table><p>Remember that these are controls and not functions: you can’t use dot notation (for example, the format <code>e.isX()</code> will not work).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="constants">Constants<a class="hash-link" href="#constants" title="Direct link to heading">​</a></h2><table><thead><tr><th>Name</th><th>Meaning</th></tr></thead><tbody><tr><td>true</td><td>The boolean constant true</td></tr><tr><td>false</td><td>The boolean constant false</td></tr><tr><td>PI</td><td>From <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#PI" target="_blank" rel="noopener noreferrer">Java&#x27;s Math.PI</a>, the value of pi (that is, 3.1415...)</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/OpenRefine/OpenRefine/edit/master/docs/versioned_docs/version-3.5/manual/grel.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-09-11T09:08:11.000Z">Sep 11, 2022</time></b> by <b>Antonin Delpeuch</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/new-openrefine-website/docs/3.5/manual/expressions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/new-openrefine-website/docs/3.5/manual/grelfunctions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">GREL functions</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#basics" class="table-of-contents__link toc-highlight">Basics</a></li><li><a href="#syntax" class="table-of-contents__link toc-highlight">Syntax</a></li><li><a href="#controls" class="table-of-contents__link toc-highlight">Controls</a></li><li><a href="#constants" class="table-of-contents__link toc-highlight">Constants</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Get OpenRefine</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/new-openrefine-website/download">Download</a></li><li class="footer__item"><a class="footer__link-item" href="/new-openrefine-website/whats_new">What&#x27;s new</a></li><li class="footer__item"><a class="footer__link-item" href="/new-openrefine-website/extensions">Extensions</a></li><li class="footer__item"><a class="footer__link-item" href="/new-openrefine-website/distributions">Other distributions</a></li><li class="footer__item"><a href="https://github.com/OpenRefine/OpenRefine" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub repository<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/new-openrefine-website/docs">User manual</a></li><li class="footer__item"><a class="footer__link-item" href="/new-openrefine-website/docs/technical-reference/technical-reference-index">Technical reference</a></li><li class="footer__item"><a class="footer__link-item" href="/new-openrefine-website/external_resources">External resources</a></li><li class="footer__item"><a class="footer__link-item" href="/new-openrefine-website/privacy">Privacy notice</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/new-openrefine-website/community">Get involved</a></li><li class="footer__item"><a href="https://forum.openrefine.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://gitter.im/OpenRefine/OpenRefine" target="_blank" rel="noopener noreferrer" class="footer__link-item">Gitter chat<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/openrefine" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://openrefine.org" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/new-openrefine-website/img/openrefine_logo.png" alt="OpenRefine diamond logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo" height="150"><img src="/new-openrefine-website/img/openrefine_logo.png" alt="OpenRefine diamond logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo" height="150"></a></div><div class="footer__copyright">Copyright © 2021 OpenRefine contributors</div></div></div></footer></div>
<script src="/new-openrefine-website/assets/js/runtime~main.d5881a30.js"></script>
<script src="/new-openrefine-website/assets/js/main.bd23b518.js"></script>
</body>
</html>